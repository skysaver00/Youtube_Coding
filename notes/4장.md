# Youtube_Coding 유튜브 클론 코딩
   
## 4.0 Router는 컨트롤러와 URL의 관리를 쉽게 해준다.
미니 어플리케이션을 쉽게 해준다.   
라우터는 직접 만들어보고 프로젝트에 적용하는게 좋다.   
/ -> home, /join -> Join, /login -> Login, /search -> Search, /users/edit -> Edit User, /users/delete -> Delete User...   
URL은 무언가를 수정하거나 삭제하거나, 하는 행동을 나타낸다.   
이 URL을 라우터에 넣는다고 생각하면 된다.   
   
## 4.1 홈에서 바로 갈 수 있는 페이지를 담고 있으면 Global Router라고 부른다.
이렇게 라우터를 만들 것이다.   
/ -> Home   
/join -> Join   
/login -> Login   
/search -> Search   
   
/users/edit -> Edit user   
/users/delete -> Delete user   
   
/videos/watch -> Watch Video   
/videos/edit -> Edit Video   
/videos/delete -> Delete Video   
/videos/comments -> Comment on a video   
/videos/comments/delete -> Delete A Comment of a video   
회원가입을 하는 것은 유저라는 것이 명확하니까 유저 라우터에 넣는 것이 Global Router에 있는것보다 좋다.   
user/join -> Join   user/login -> Login   
꼭 이렇게 해야하는 것은 아니다. 깔끔하지 않기 때문. URL은 최대한 보기 좋게 만드는 것이 좋다.  
규칙은 이렇게 하는게 맞지만, 규칙을 꼭 지킬 필요는 없기 때문.   
라우터를 만드는 방법은 Global Router를 만드는 것이다.   
**const globalRouter = express.Router();**이렇게 하면 Global Router를 만든 것이 된다.
URL을 라우터에 연결하는 방법은 위의 루트 URL을 가져오는 것이다.   
app.get()대신에, router.get()를 쓰는 방법이 있다.   
그럼 일일이 app.get로 /videos/watch를 만드는 것 대신, videos로 시작하는 URL로 접근하면, videoRouter에 있는 컨트롤러를 찾는다.
videoRouter는 한 Router밖에 없기 때문에 그 Router에서 Express가 함수를 실행하게 된다.   
   
## 4.2 코드를 더 깨끗하게 만드는 방법 중 하나는 Controller와 Router를 분리하는 것이다.
자바스크립트는 모든 파일이 자기만의 세계를 가진다.   
server.js에 express를 import해도, 다른 파일에서 새로 import해줘야 한다는 것이다.   
또한 import를 해줬으면 export도 해줘야 한다.   
따라서 default export라는 것이 존재한다.   
export default globalRouter.js를 import하려면 globalRouter의 주소를 import해줘야한다.   
globalRouter라는 변수를 export해서 server.js에서 import해주고 있는 것이다.
   
## 4.3 Global Router는 URL을 더 깔끔하게 하기 위해 쓰는 거일 뿐이라 일반적으로 Controller가 필요는 없다.
export를 하나씩 해줄 필요 없이, 그냥 그 줄에서 export를 넣어서 export const로 바로 export하는 방법이 있다. 이 방법이 더 편하다.   
앞선 방법으로 하면 한 파일에서 여러개의 export를 할 수 있기 때문에 더 쉽다.   
export default대신 export const 여러개가 더 좋다.   
default로 export할때는 원하는 어떤 이름이든 간에 상관이 없었다. 말 그대로 default이기 때문에 기본값으로 설정된 것.   
하지만 export const는 실제 이름을 그대로 써야 한다. default가 아니기 때문에 기본값이 아니다.   
watch, edit는 video Controller에 있고, export까지 됬다. 이를 video Router에 넣어주면 된다.   
따라서 **export const를 쓸때는 {}안에 두고 사용해야 한다.** 기억할 것!   
이게 바로 아키텍쳐를 만드는 방법이다!   
   
## 4.4 지난번에는 server.js에서 app.get를 쓰는 것을 그만두고 app.use를 쓰기로 했다.
url을 그룹으로 구분하지 않으면 구분하기가 어렵고, 힘들어지기 때문이다.   
현재 3개의 라우터가 있다. /은 global router -> 메인이다.   
/video는 video router라고 해서 뒤에 /watch또는 /edit가 무조건 붙어야한다.
/user에는 /edit, /remove가 있다. 유저 url에서는 라우터 안에서 /edit, /remove만을 통해 접속할 수 있다. 따라서 /user를 추가로 붙여줄 일은 없어진다.   
위의 것을 안하기 위해 router를 만들어 준 것이다.
router는 url을 그룹화 하는 것이다.
